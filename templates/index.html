<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>PyRobot Web UI</title>
    <script type="text/javascript" src="/static/MochiKit/MochiKit.js"></script>
  </head>
  <body>
    <img name="webcam" id="webcam" src="/static/webcam.png">
    <script language="javascript">
    var timeout = 2500;
    function reloadImage() {
      var now = new Date();
      if (document.images) {
          document.images.webcam.src = '/static/webcam.png?' + now.getTime();
      }
      setTimeout('reloadImage()', timeout);
    }
    setTimeout('reloadImage()', timeout);
    </script>
    <br>
    <a href="/forward">Forward</a> |
    <a href="/reverse">Reverse</a> |
    <a href="/left">Left</a> |
    <a href="/right">Right</a> |
    <a href="/dock">Dock</a>
    <br><br>
    <div id='charge'></div>
    <div id='charging-state'></div>
    <div id='temperature'></div>
    <script language="javascript">
    function updateSensorData() {
      var url = '/sensors';
      var d = loadJSONDoc(url);
      d.addCallback(function(r) {
        getElement('charge').innerHTML = 'Charge: ' + r.charge + '/' + r.capacity;
        getElement('charging-state').innerHTML = 'Charging state: ' + r['charging-state'];
        getElement('temperature').innerHTML = 'Temperature: ' + r.temperature;
        setTimeout('updateSensorData()', 2500);
      });
    }
    updateSensorData();
    </script>
  </body>
</html>
